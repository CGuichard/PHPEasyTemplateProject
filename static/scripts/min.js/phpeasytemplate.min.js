/**
 * @file phpeasytemplate.min.js
 * This file contain javascript functions needed in all pages
 * of the website.
 *
 * @author Clement GUICHARD <clement.guichard1@etu.univ-orleans.fr>
 * @version 1.0
 *
 * @requires jquery-3.0.0 or up
 * @requires bootstrap-4.0.0 or up
 * @requires mdb-free-4.0.0 or up (mdb-pro-4.0.0 is also good)
 *
 * @see {@link https://jquery.com/|JQuery 3}
 * @see {@link https://getbootstrap.com/|Bootstrap 4}
 * @see {@link https://mdbootstrap.com/|Material Design for Bootstrap 4}
 *
 */function send_ajax(form_id,btn_form_id,alert_block_id,alert_title_id,alert_text_id,next_function){const form=$("#"+form_id);const btn_form=$("#"+btn_form_id);const alert_block=$("#"+alert_block_id);const alert_title=$("#"+alert_title_id);const alert_text=$("#"+alert_text_id);alert_block.prop('hidden',!0);form.submit(function(event){event.preventDefault();const formData=form.serialize();const btncontent=btn_form.html();btn_form.html("<i class='fas fa-spinner fa-lg fa-pulse'></i>");alert_block.prop('hidden',!0);$.ajax({type:'POST',url:form.attr('action'),data:formData,dataType:'JSON',success:function(rep){if(rep.success==200){if(next_function!=null)next_function();else window.location.href=""}else{if(rep.success==500){if(alert_block.hasClass("alert-success"))alert_block.removeClass("alert-success");if(alert_block.hasClass("alert-warning"))alert_block.removeClass("alert-warning");if(!alert_block.hasClass("alert-danger"))alert_block.addClass("alert-danger")}else if(rep.success==404){if(alert_block.hasClass("alert-success"))alert_block.removeClass("alert-success");if(alert_block.hasClass("alert-danger"))alert_block.removeClass("alert-danger");if(!alert_block.hasClass("alert-warning"))alert_block.addClass("alert-warning")}alert_title.text(rep.title);alert_text.text(rep.response);alert_block.prop('hidden',!1);btn_form.html(btncontent)}},error:function(req,status,err){if(alert_block.hasClass("alert-success"))alert_block.removeClass("alert-success");if(alert_block.hasClass("alert-warning"))alert_block.removeClass("alert-warning");if(!alert_block.hasClass("alert-danger"))alert_block.addClass("alert-danger");alert_title.text("ERROR");if(err=="")err="Cannot connect to the server";alert_text.text(err);alert_block.prop('hidden',!1);btn_form.html(btncontent)}})})}function manage_connection_modal(){if($("#modal-connection-success").length){$("#modal-connection-success").modal()}}function manage_sign_in(){if($("#form-connec").length){send_ajax("form-connec","btnlogin","alert-connec","alert-connec-title","alert-connec-msg",function(){window.location.href=$("#form-connec-next").val()})}}function manage_header_display(current_scroll_top){const page_padding=0;const in_a="rotateIn";const out_a="rotateOut";const header_height=$('#header-block').height();const navbar_height=$('#navbar').height();if(current_scroll_top>header_height){$('#navbar-title').show();$('#top-arrow').show();$('#top-arrow').removeClass('animated '+out_a);$('#top-arrow').addClass('animated '+in_a);$('#navbar').addClass('fixed-top');$('#navbar').addClass('z-depth-2');$('header').css('margin-bottom',(page_padding+navbar_height+16)+'px')}else{$('#navbar-title').hide();$('#top-arrow').removeClass('animated '+in_a);$('#top-arrow').addClass('animated '+out_a);$('#navbar').removeClass('fixed-top');$('#navbar').removeClass('z-depth-2');$('header').css('margin-bottom',page_padding+'px')}}function manage_top_arrow_display(current_scroll_bot){const footer_height=$('#footer').height();if(current_scroll_bot>footer_height){$('#top-arrow').css("bottom","10px")}else{$('#top-arrow').css("bottom",(footer_height-current_scroll_bot+15)+"px")}}function manage_scroll(){$(document).on('click','a[href^="#"]',async function(e){const id=$(this).attr('href');const $id=$(id);if($id.length===0){return}e.preventDefault();const pos=$id.offset().top;$('body, html').animate({scrollTop:pos-80},{duration:1000})})}function manage_dropdown(){$('#navbar-right .dropdown').on('show.bs.dropdown',function(){$(this).find('.dropdown-menu').first().stop(!0,!0).slideDown("400")});$('#navbar-right .dropdown').on('hide.bs.dropdown',function(){$(this).find('.dropdown-menu').first().stop(!0,!0).slideUp("400")});$("#navbar-left .dropdown").hover(function(){$('.dropdown-menu',this).not('.in .dropdown-menu').stop(!0,!0).slideDown("400");$(this).toggleClass('open')},function(){$('.dropdown-menu',this).not('.in .dropdown-menu').stop(!0,!0).slideUp("400");$(this).toggleClass('open')})}function manage_jarallax(){if(typeof jarallax!='undefined'){jarallax(document.querySelectorAll('.jarallax'),{disableParallax:/iPad|iPhone|iPod|Android/,disableVideo:/iPad|iPhone|iPod|Android/});$('.jarallax').jarallax({speed:0.5,imgPosition:"0% 0%",imgSize:"cover",})}else{}}function manage_display(){$('#top-arrow').hide();if($(window).height()==$(document).height()){$(".page-footer").addClass("fixed-bottom")}const navlinks=$(".navbar .nav-link");const actual=$("#page-section")[0].innerText;for(link of navlinks)if(link.innerText===actual)$(link).addClass("active");let posTop=$(window).scrollTop();let posBot=$(document).height()-$(window).height()-posTop;manage_header_display(posTop);manage_top_arrow_display(posBot);$(window).scroll(function(){posTop=$(window).scrollTop();posBot=$(document).height()-$(window).height()-posTop;manage_header_display(posTop);manage_top_arrow_display(posBot)})}function main(){new WOW().init();manage_display();manage_scroll();manage_dropdown();manage_jarallax();manage_sign_in();manage_connection_modal()}main()
